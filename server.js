const _0x446678=_0x7a18;function _0x7a18(_0x5316f6,_0x49cf89){const _0x5c046c=_0x5c04();return _0x7a18=function(_0x7a1803,_0x4f5f9f){_0x7a1803=_0x7a1803-0x8e;let _0x44dcca=_0x5c046c[_0x7a1803];return _0x44dcca;},_0x7a18(_0x5316f6,_0x49cf89);}(function(_0xb61850,_0xcd83da){const _0x2164c8=_0x7a18,_0x3ff8d7=_0xb61850();while(!![]){try{const _0x801993=parseInt(_0x2164c8(0xd2))/0x1*(-parseInt(_0x2164c8(0xa0))/0x2)+-parseInt(_0x2164c8(0x95))/0x3+-parseInt(_0x2164c8(0xc8))/0x4*(parseInt(_0x2164c8(0x91))/0x5)+parseInt(_0x2164c8(0xd9))/0x6+parseInt(_0x2164c8(0xdc))/0x7+parseInt(_0x2164c8(0xa2))/0x8*(-parseInt(_0x2164c8(0xb5))/0x9)+parseInt(_0x2164c8(0xc6))/0xa*(parseInt(_0x2164c8(0xbf))/0xb);if(_0x801993===_0xcd83da)break;else _0x3ff8d7['push'](_0x3ff8d7['shift']());}catch(_0x553f00){_0x3ff8d7['push'](_0x3ff8d7['shift']());}}}(_0x5c04,0xb1632));typeof File===_0x446678(0xb4)&&(global['File']=class File{});const express=require(_0x446678(0x94)),axios=require(_0x446678(0xcf)),path=require(_0x446678(0xa9)),fs=require('fs'),utils=require(_0x446678(0xbc)),app=express(),PORT=process[_0x446678(0xc4)]['PORT']||0xbb8,configPath=path[_0x446678(0xb7)](__dirname,'config.json'),config=JSON[_0x446678(0xd5)](fs[_0x446678(0xbe)](configPath,_0x446678(0xda)));function _0x5c04(){const _0xda2865=['index','search','DEBUG_MODE:\x20禁用','sites','undefined','9qNcOFR','defaultSite','join','view\x20engine','url','getHeaders',']\x20获取到JSON响应','./utils','获取详情失败:','readFileSync','22MhWVvS','log','set','searchUrl','data','env','responseType','13244670HVtSSE',']\x20详情页URL:\x20','4pLOnSL','{keyword}','该视频没有可用的播放链接','urlencoded','length','搜索失败，请稍后重试','listen','axios','搜索失败:','/detail','2AxirRO',']\x20找到\x20','json','parse','views','默认站点:\x20','\x20个播放链接','4217418Meacvj','utf8','get','2294593HwTNHS','parseSearchResults','use','site',']\x20解析到\x20','1226605rkGbVp','加载了\x20','/about','express','660246nkXmUe','error','\x20个站点配置','baseUrl','ejs','render','找不到站点ID:\x20','name','replace','/search','query','1048772nVzMfm','\x20个搜索结果','11511064sIzQDM','about','find','status','message','static','[详情页]\x20过滤后剩余\x20','path','服务器运行中:\x20http://localhost:','parseDetailPage','[详情页]\x20未找到播放链接','formatDate','未找到播放资源','/assets'];_0x5c04=function(){return _0xda2865;};return _0x5c04();}app['set'](_0x446678(0xd6),path[_0x446678(0xb7)](__dirname,_0x446678(0xd6))),app[_0x446678(0xc1)](_0x446678(0xb8),_0x446678(0x99)),app[_0x446678(0x8e)](express[_0x446678(0xa7)](path[_0x446678(0xb7)](__dirname,'public'))),app[_0x446678(0x8e)](express[_0x446678(0xcb)]({'extended':!![]})),app[_0x446678(0x8e)](_0x446678(0xaf),express['static'](path[_0x446678(0xb7)](__dirname,'assets'))),app[_0x446678(0xdb)]('/',(_0x43cbcc,_0x1c51dc)=>{const _0x1c478a=_0x446678;_0x1c51dc['render'](_0x1c478a(0xb0),{'sites':config[_0x1c478a(0xb3)],'defaultSite':config[_0x1c478a(0xb6)]});}),app[_0x446678(0xdb)](_0x446678(0x93),(_0xfc1239,_0x2ad068)=>{const _0x14cf33=_0x446678;_0x2ad068['render'](_0x14cf33(0xa3));}),app[_0x446678(0xdb)](_0x446678(0x9e),async(_0x36063b,_0x521687)=>{const _0x371f3b=_0x446678,_0x1ab669=_0x36063b[_0x371f3b(0x9f)]['wd'],_0x33eb04=_0x36063b['query']['site']||config[_0x371f3b(0xb6)];if(!_0x1ab669)return _0x521687['redirect']('/');try{const _0x36277f=config[_0x371f3b(0xb3)]['find'](_0x2b6fb3=>_0x2b6fb3['id']===_0x33eb04);if(!_0x36277f)return _0x521687['status'](0x190)[_0x371f3b(0x9a)](_0x371f3b(0x96),{'message':'无效的站点配置','error':_0x371f3b(0x9b)+_0x33eb04});const _0x19c81a=_0x36277f[_0x371f3b(0xc2)][_0x371f3b(0x9d)](_0x371f3b(0xc9),encodeURIComponent(_0x1ab669));console[_0x371f3b(0xc0)]('['+_0x36277f[_0x371f3b(0x9c)]+']\x20搜索URL:\x20'+_0x19c81a);const _0x3810d2={'headers':utils[_0x371f3b(0xba)](_0x36277f[_0x371f3b(0x98)])};_0x36277f[_0x371f3b(0xc5)]==='json'&&(_0x3810d2['responseType']='json');const _0x58c4ea=await axios[_0x371f3b(0xdb)](_0x19c81a,_0x3810d2);let _0x234fa4;_0x36277f['responseType']===_0x371f3b(0xd4)?(console[_0x371f3b(0xc0)]('['+_0x36277f['name']+_0x371f3b(0xbb)),_0x234fa4=utils['parseJsonSearchResults'](_0x58c4ea['data'],_0x36277f)):_0x234fa4=utils[_0x371f3b(0xdd)](_0x58c4ea[_0x371f3b(0xc3)],_0x36277f),console['log']('['+_0x36277f[_0x371f3b(0x9c)]+_0x371f3b(0xd3)+_0x234fa4[_0x371f3b(0xcc)]+_0x371f3b(0xa1)),_0x521687['render'](_0x371f3b(0xb1),{'keyword':_0x1ab669,'results':_0x234fa4,'siteId':_0x33eb04,'sites':config[_0x371f3b(0xb3)],'formatDate':utils[_0x371f3b(0xad)]});}catch(_0x51e409){console[_0x371f3b(0x96)](_0x371f3b(0xd0),_0x51e409),_0x521687[_0x371f3b(0xa5)](0x1f4)[_0x371f3b(0x9a)](_0x371f3b(0x96),{'message':_0x371f3b(0xcd),'error':_0x51e409[_0x371f3b(0xa6)]});}}),app[_0x446678(0xdb)](_0x446678(0xd1),async(_0x17ab82,_0x36b167)=>{const _0x3e0f99=_0x446678,_0x2a88c7=_0x17ab82[_0x3e0f99(0x9f)][_0x3e0f99(0xb9)],_0x70afa9=_0x17ab82[_0x3e0f99(0x9f)][_0x3e0f99(0x8f)]||config['defaultSite'];if(!_0x2a88c7)return _0x36b167['redirect']('/');try{const _0x54ec68=config['sites'][_0x3e0f99(0xa4)](_0x3306b0=>_0x3306b0['id']===_0x70afa9);if(!_0x54ec68)return _0x36b167[_0x3e0f99(0xa5)](0x190)[_0x3e0f99(0x9a)](_0x3e0f99(0x96),{'message':'无效的站点配置','error':'找不到站点ID:\x20'+_0x70afa9});console[_0x3e0f99(0xc0)]('['+_0x54ec68[_0x3e0f99(0x9c)]+_0x3e0f99(0xc7)+_0x2a88c7);const _0x499836=await axios[_0x3e0f99(0xdb)](_0x2a88c7,{'headers':utils[_0x3e0f99(0xba)](_0x54ec68['baseUrl'])}),{title:_0x1d2453,playLinks:_0x5636ae}=utils[_0x3e0f99(0xab)](_0x499836[_0x3e0f99(0xc3)],_0x54ec68);console[_0x3e0f99(0xc0)]('['+_0x54ec68[_0x3e0f99(0x9c)]+_0x3e0f99(0x90)+_0x5636ae[_0x3e0f99(0xcc)]+_0x3e0f99(0xd8));if(!_0x5636ae[_0x3e0f99(0xcc)])return console[_0x3e0f99(0xc0)](_0x3e0f99(0xac)),_0x36b167[_0x3e0f99(0x9a)](_0x3e0f99(0x96),{'message':_0x3e0f99(0xae),'error':_0x3e0f99(0xca)});const _0x5d9e32=utils['filterPlayLinks'](_0x5636ae,_0x54ec68);console[_0x3e0f99(0xc0)](_0x3e0f99(0xa8)+_0x5d9e32['length']+_0x3e0f99(0xd8)),_0x36b167[_0x3e0f99(0x9a)]('detail',{'title':_0x1d2453||'未知标题','playLinks':_0x5d9e32,'detailUrl':_0x2a88c7,'siteId':_0x70afa9,'sites':config[_0x3e0f99(0xb3)]});}catch(_0x5c5ce9){console[_0x3e0f99(0x96)](_0x3e0f99(0xbd),_0x5c5ce9),_0x36b167[_0x3e0f99(0xa5)](0x1f4)[_0x3e0f99(0x9a)](_0x3e0f99(0x96),{'message':'获取详情失败，请检查链接','error':_0x5c5ce9[_0x3e0f99(0xa6)]});}}),app[_0x446678(0xce)](PORT,()=>{const _0x3c35a7=_0x446678;console[_0x3c35a7(0xc0)](_0x3c35a7(0xaa)+PORT),console[_0x3c35a7(0xc0)](_0x3c35a7(0x92)+config[_0x3c35a7(0xb3)]['length']+_0x3c35a7(0x97)),console['log'](_0x3c35a7(0xd7)+config[_0x3c35a7(0xb6)]),console['log'](_0x3c35a7(0xb2));});
